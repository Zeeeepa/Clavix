// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Optimization Output Snapshots deep mode output structure should produce consistent structure with alternatives: deep-mode-with-alternatives 1`] = `
"{
  "appliedPatterns": [
    {
      "description": "Identifies and clarifies ambiguous terms and vague references",
      "impact": "low",
      "name": "Ambiguity Detector"
    },
    {
      "description": "Add precise context when missing",
      "impact": "high",
      "name": "Context Precision Booster"
    },
    {
      "description": "Converts vague goals into specific, actionable tasks",
      "impact": "medium",
      "name": "Actionability Enhancer"
    },
    {
      "description": "Break complex prompts into clear sequential steps",
      "impact": "high",
      "name": "Step-by-Step Decomposer"
    },
    {
      "description": "Adds explicit output format specifications for agent clarity",
      "impact": "medium",
      "name": "Output Format Enforcer"
    },
    {
      "description": "Ensures all necessary requirements are present",
      "impact": "high",
      "name": "Completeness Validator"
    },
    {
      "description": "Make implicit assumptions explicit to prevent misunderstandings",
      "impact": "high",
      "name": "Assumption Explicitizer"
    },
    {
      "description": "Identifies and documents prerequisites and dependencies for task execution",
      "impact": "medium",
      "name": "Prerequisite Identifier"
    },
    {
      "description": "Generate alternative prompt structures for different approaches",
      "impact": "medium",
      "name": "Alternative Phrasing Generator"
    },
    {
      "description": "Add explicit scope boundaries to prevent scope creep",
      "impact": "medium",
      "name": "Scope Definer"
    },
    {
      "description": "Adds domain-specific best practices and context",
      "impact": "medium",
      "name": "Domain Context Enricher"
    },
    {
      "description": "Identify potential edge cases and failure modes by domain",
      "impact": "high",
      "name": "Edge Case Identifier"
    },
    {
      "description": "Create implementation validation checklist for verification",
      "impact": "high",
      "name": "Validation Checklist Creator"
    }
  ],
  "enhanced": "Add dark mode to my app/n/n## Clarifications Needed/n[CLARIFY: /"app/" - specify: web app, mobile app, desktop app?]/n/n### Context Needed/n/nPlease provide additional context for better (e.g., faster (specify: < 100ms, < 1s, etc.)) results:/n/n**1. What are the expected inputs and outputs?**/n   _Suggestion: Define function signature: inputs, return type, and data structures_/n/n**2. Is there existing code this should integrate with?**/n   _Suggestion: Reference existing patterns, imports, or dependencies in the project_/n/n**3. How should errors be handled?**/n   _Suggestion: Specify error handling strategy (throw, return null, default value)_/n/n/n### Implementation Steps/n/n1. Define function signature and types/n2. Implement core logic/n3. Handle edge cases/n4. Add documentation/n5. Write tests/n/n## Expected Output Format/n/nSpecify the desired output format:/n- TypeScript/JavaScript function with type annotations/n- React component with props interface/n- Module with exports/n- Class with methods/n- API endpoint implementation/n/n**Note**: Explicit output format helps ensure consistent, usable results./n/n---/n/n**Completeness Check**: 40% (2/5 elements present)/n/n**Missing Information** (please specify):/n/n- **Objective**: What is the primary goal? What problem are you solving?/n- **Success Criteria**: How will you know it works? What metrics matter?/n- **Constraints**: Any limitations? (time, budget, performance, compatibility)/n/n### Implicit Assumptions/n/nThe following assumptions are being made. Please clarify if any are incorrect:/n/n**1. Using async/await pattern**/n   → Clarify: Should this be synchronous or asynchronous?/n/n**2. Using React Context or local state**/n   → Clarify: Which state management approach is preferred?/n/n**3. Building REST API**/n   → Clarify: Which API style? (REST, GraphQL, gRPC, etc.)/n/n/n## Prerequisites/n/nBefore starting this task, ensure:/n- [ ] Development environment set up/n- [ ] Required dependencies installed/n- [ ] Coding standards/style guide available/n- [ ] Node.js >= 16.x installed/n- [ ] npm or yarn package manager/n- [ ] TypeScript installed/n- [ ] tsconfig.json configured/n- [ ] API endpoint accessible/n/n**Note**: Check prerequisites to avoid blockers during implementation./n/n### Alternative Approaches/n/n**1. Functional Decomposition**/n   Break down into discrete functions with clear interfaces/n   → Best for: Step-by-step implementation, clarity on sequence/n/n**2. Test-Driven Approach**/n   Define expected behavior through tests first/n   → Best for: When requirements are clear and testable/n/n**3. Example-Driven**/n   Provide concrete input/output examples/n   → Best for: When you have reference implementations/n/n/n### Scope Definition/n/n**In Scope:**/n✓ Component implementation with specified functionality/n✓ API endpoint implementation/n/n**Out of Scope:**/n✗ Deployment and CI/CD configuration/n✗ Production infrastructure setup/n/n**Boundaries & Assumptions:**/n• Limited to specified component/module boundaries/n• Database schema assumed to exist or specified separately/n• Following existing project conventions and patterns/n/n## Domain Best Practices (api, database)/n/nConsider these best practices:/n- Use consistent response formats (JSON:API, HAL, etc.)/n- Implement proper HTTP status codes/n- Version your API (URL path or header)/n- Use parameterized queries to prevent SQL injection/n- Create indexes for frequently queried columns/n- Implement proper connection pooling/n/n**Note**: These are general best practices - adapt to your specific context./n/n### Edge Cases to Consider/n/n• **Empty or null inputs**: How should the system handle missing or undefined values?/n• **Invalid input types**: What happens if input is wrong type (string vs number)?/n• **Network failures**: How to handle timeouts, connection errors, and retries?/n• **Boundary conditions**: What happens at min/max values, empty collections, or single items?/n• **Race conditions**: What if multiple operations access shared state simultaneously?/n• **Large files**: What are size limits? How to handle files that exceed limits?/n• **Malicious files**: How to validate file types and scan for malware?/n• **Timezone handling**: How to handle users in different timezones?/n/n### Validation Checklist/n/nBefore considering this task complete, verify:/n/n**Functionality:**/n☐ Code compiles/runs without errors/n☐ All requirements from prompt are implemented/n☐ API returns correct status codes/n☐ File uploads work for valid files/n/n**Robustness:**/n☐ Edge cases are handled gracefully/n☐ API handles invalid requests gracefully/n/n**Ux:**/n☐ UI renders correctly on different screen sizes/n/n**Accessibility:**/n☐ Keyboard navigation works correctly/n/n**Testing:**/n☐ Unit tests pass/n☐ Test coverage meets requirements/n/n**Validation:**/n☐ Invalid/large files are rejected gracefully/n/n**Performance:**/n☐ Database queries perform well",
  "improvements": [
    {
      "description": "Identified 1 ambiguous terms/phrases requiring clarification",
      "dimension": "clarity",
      "impact": "low"
    },
    {
      "description": "Identified 3 areas needing context clarification",
      "dimension": "completeness",
      "impact": "high"
    },
    {
      "description": "Made 2 improvements to increase specificity",
      "dimension": "actionability",
      "impact": "medium"
    },
    {
      "description": "Decomposed into 5 sequential steps",
      "dimension": "structure",
      "impact": "high"
    },
    {
      "description": "Added output format guidance for code-generation intent",
      "dimension": "actionability",
      "impact": "medium"
    },
    {
      "description": "Added 3 missing element prompts (40% complete)",
      "dimension": "completeness",
      "impact": "high"
    },
    {
      "description": "Identified 3 implicit assumptions to clarify",
      "dimension": "clarity",
      "impact": "high"
    },
    {
      "description": "Added 8 prerequisites for react, typescript, api",
      "dimension": "completeness",
      "impact": "medium"
    },
    {
      "description": "Generated 3 alternative approaches",
      "dimension": "structure",
      "impact": "medium"
    },
    {
      "description": "Added explicit scope boundaries",
      "dimension": "completeness",
      "impact": "medium"
    },
    {
      "description": "Added 6 best practices for api, database",
      "dimension": "completeness",
      "impact": "medium"
    },
    {
      "description": "Identified 8 potential edge cases",
      "dimension": "completeness",
      "impact": "high"
    },
    {
      "description": "Created validation checklist with 12 items",
      "dimension": "actionability",
      "impact": "high"
    }
  ],
  "intent": {
    "characteristics": {
      "hasCodeContext": false,
      "hasTechnicalTerms": false,
      "isOpenEnded": false,
      "needsStructure": true
    },
    "confidence": 50,
    "primaryIntent": "code-generation",
    "suggestedMode": "deep"
  },
  "mode": "deep",
  "original": "Add dark mode to my app",
  "processingTimeMs": "[PROCESSING_TIME]",
  "quality": {
    "actionability": 0,
    "clarity": 100,
    "completeness": 100,
    "efficiency": 80,
    "improvements": [
      "Added missing context and specifications"
    ],
    "overall": 78,
    "specificity": 100,
    "strengths": [
      "Clear objective and goals",
      "Well-structured with logical flow",
      "Comprehensive with all necessary details",
      "Highly specific with concrete details"
    ],
    "structure": 100
  }
}"
`;

exports[`Optimization Output Snapshots fast mode output structure should produce consistent structure for complex prompts: fast-mode-complex-prompt 1`] = `
"{
  "appliedPatterns": [
    {
      "description": "Removes unnecessary pleasantries, fluff words, and redundancy",
      "impact": "low",
      "name": "Conciseness Filter"
    },
    {
      "description": "Extracts or infers clear goal statement",
      "impact": "high",
      "name": "Objective Clarifier"
    },
    {
      "description": "Identifies and clarifies ambiguous terms and vague references",
      "impact": "high",
      "name": "Ambiguity Detector"
    },
    {
      "description": "Adds missing technical context (language, framework, versions)",
      "impact": "medium",
      "name": "Technical Context Enricher"
    },
    {
      "description": "Add precise context when missing",
      "impact": "high",
      "name": "Context Precision Booster"
    },
    {
      "description": "Converts vague goals into specific, actionable tasks",
      "impact": "medium",
      "name": "Actionability Enhancer"
    },
    {
      "description": "Break complex prompts into clear sequential steps",
      "impact": "high",
      "name": "Step-by-Step Decomposer"
    },
    {
      "description": "Ensures all necessary requirements are present",
      "impact": "low",
      "name": "Completeness Validator"
    },
    {
      "description": "Adds domain-specific best practices and context",
      "impact": "medium",
      "name": "Domain Context Enricher"
    }
  ],
  "enhanced": "# Objective/nbuild a user authentication system that supports: - Email/password login - OAuth with Google and GitHub - Two-factor authentication - Password reset flow Please include security best practices/n/nI need to build a user authentication system that supports: - Email/password login - OAuth with Google and GitHub - Two-factor authentication - Password reset flow Please include security best practices./n/n## Clarifications Needed/n[CLARIFY: /"system/" - specify: backend system, frontend system, full-stack system?]/n[CLARIFY: /"authentication/" - specify: OAuth, JWT, session-[ID]?]/n[CLARIFY: /"user/" - specify: end user, admin user, API consumer?]/n[CLARIFY: /"best/" - specify: optimal, industry standard, team consensus?]/n/n# Technical Constraints/n- Language: Go (please specify version if critical)/n/n### Context Needed/n/nPlease provide additional context for better (e.g., faster (specify: < 100ms, < 1s, etc.)) results:/n/n**1. Which version are you targeting?**/n   _Suggestion: Specify exact versions (e.g., React 18, Node 20, TypeScript 5.x)_/n/n**2. What are the expected inputs and outputs?**/n   _Suggestion: Define function signature: inputs, return type, and data structures_/n/n**3. Is there existing code this should integrate with?**/n   _Suggestion: Reference existing patterns, imports, or dependencies in the project_/n/n**4. How should errors be handled?**/n   _Suggestion: Specify error handling strategy (throw, return null, default value)_/n/n/n### Implementation Steps/n/n1. Define component interface and props/n2. Implement core component logic/n3. Add styling and responsive design/n4. Add error handling and edge cases/n5. Write unit tests/n/n---/n/n**Completeness Check**: 80% (4/5 elements present)/n/n**Missing Information** (please specify):/n/n- **Success Criteria**: How will you know it works? What metrics matter?/n/n## Domain Best Practices (authentication, api)/n/nConsider these best practices:/n- Never store plain-text passwords - use bcrypt/argon2/n- Implement rate limiting on auth endpoints/n- Use secure, httpOnly cookies for session tokens/n- Use consistent response formats (JSON:API, HAL, etc.)/n- Implement proper HTTP status codes/n- Version your API (URL path or header)/n/n**Note**: These are general best practices - adapt to your specific context.",
  "improvements": [
    {
      "description": "Removed 0 unnecessary phrases for conciseness",
      "dimension": "efficiency",
      "impact": "low"
    },
    {
      "description": "Added clear objective statement",
      "dimension": "clarity",
      "impact": "high"
    },
    {
      "description": "Identified 4 ambiguous terms/phrases requiring clarification",
      "dimension": "clarity",
      "impact": "high"
    },
    {
      "description": "Added 1 technical context specifications",
      "dimension": "completeness",
      "impact": "medium"
    },
    {
      "description": "Identified 4 areas needing context clarification",
      "dimension": "completeness",
      "impact": "high"
    },
    {
      "description": "Made 2 improvements to increase specificity",
      "dimension": "actionability",
      "impact": "medium"
    },
    {
      "description": "Decomposed into 5 sequential steps",
      "dimension": "structure",
      "impact": "high"
    },
    {
      "description": "Added 1 missing element prompts (80% complete)",
      "dimension": "completeness",
      "impact": "low"
    },
    {
      "description": "Added 6 best practices for authentication, api",
      "dimension": "completeness",
      "impact": "medium"
    }
  ],
  "intent": {
    "characteristics": {
      "hasCodeContext": false,
      "hasTechnicalTerms": true,
      "isOpenEnded": true,
      "needsStructure": false
    },
    "confidence": 50,
    "primaryIntent": "code-generation",
    "suggestedMode": "deep"
  },
  "mode": "fast",
  "original": "/n        I need to build a user authentication system that supports:/n        - Email/password login/n        - OAuth with Google and GitHub/n        - Two-factor authentication/n        - Password reset flow/n        Please include security best practices./n      ",
  "processingTimeMs": "[PROCESSING_TIME]",
  "quality": {
    "actionability": 40,
    "clarity": 100,
    "completeness": 100,
    "efficiency": 95,
    "improvements": [
      "Added missing context and specifications",
      "Added clear objective statement",
      "Added technical context"
    ],
    "overall": 87.5,
    "specificity": 100,
    "strengths": [
      "Clear objective and goals",
      "Concise and focused",
      "Well-structured with logical flow",
      "Comprehensive with all necessary details",
      "Highly specific with concrete details"
    ],
    "structure": 100
  }
}"
`;

exports[`Optimization Output Snapshots fast mode output structure should produce consistent structure for simple prompts: fast-mode-simple-prompt 1`] = `
"{
  "appliedPatterns": [
    {
      "description": "Extracts or infers clear goal statement",
      "impact": "high",
      "name": "Objective Clarifier"
    },
    {
      "description": "Identifies and clarifies ambiguous terms and vague references",
      "impact": "low",
      "name": "Ambiguity Detector"
    },
    {
      "description": "Add precise context when missing",
      "impact": "high",
      "name": "Context Precision Booster"
    },
    {
      "description": "Converts vague goals into specific, actionable tasks",
      "impact": "medium",
      "name": "Actionability Enhancer"
    },
    {
      "description": "Break complex prompts into clear sequential steps",
      "impact": "high",
      "name": "Step-by-Step Decomposer"
    },
    {
      "description": "Adds explicit output format specifications for agent clarity",
      "impact": "medium",
      "name": "Output Format Enforcer"
    },
    {
      "description": "Ensures all necessary requirements are present",
      "impact": "medium",
      "name": "Completeness Validator"
    },
    {
      "description": "Adds domain-specific best practices and context",
      "impact": "medium",
      "name": "Domain Context Enricher"
    }
  ],
  "enhanced": "# Objective/na login page/n/nCreate a login page/n/n## Clarifications Needed/n[CLARIFY: /"create/" - specify: generate, implement, design?]/n/n### Context Needed/n/nPlease provide additional context for better (e.g., faster (specify: < 100ms, < 1s, etc.)) results:/n/n**1. What are the expected inputs and outputs?**/n   _Suggestion: Define function signature: inputs, return type, and data structures_/n/n**2. Is there existing code this should integrate with?**/n   _Suggestion: Reference existing patterns, imports, or dependencies in the project_/n/n**3. How should errors be handled?**/n   _Suggestion: Specify error handling strategy (throw, return null, default value)_/n/n/n### Implementation Steps/n/n1. Define function signature and types/n2. Implement core logic/n3. Handle edge cases/n4. Add documentation/n5. Write tests/n/n## Expected Output Format/n/nSpecify the desired output format:/n- TypeScript/JavaScript function with type annotations/n- React component with props interface/n- Module with exports/n- Class with methods/n- API endpoint implementation/n/n**Note**: Explicit output format helps ensure consistent, usable results./n/n---/n/n**Completeness Check**: 60% (3/5 elements present)/n/n**Missing Information** (please specify):/n/n- **Success Criteria**: How will you know it works? What metrics matter?/n- **Constraints**: Any limitations? (time, budget, performance, compatibility)/n/n## Domain Best Practices (authentication, api)/n/nConsider these best practices:/n- Never store plain-text passwords - use bcrypt/argon2/n- Implement rate limiting on auth endpoints/n- Use secure, httpOnly cookies for session tokens/n- Use consistent response formats (JSON:API, HAL, etc.)/n- Implement proper HTTP status codes/n- Version your API (URL path or header)/n/n**Note**: These are general best practices - adapt to your specific context.",
  "improvements": [
    {
      "description": "Added clear objective statement",
      "dimension": "clarity",
      "impact": "high"
    },
    {
      "description": "Identified 1 ambiguous terms/phrases requiring clarification",
      "dimension": "clarity",
      "impact": "low"
    },
    {
      "description": "Identified 3 areas needing context clarification",
      "dimension": "completeness",
      "impact": "high"
    },
    {
      "description": "Made 2 improvements to increase specificity",
      "dimension": "actionability",
      "impact": "medium"
    },
    {
      "description": "Decomposed into 5 sequential steps",
      "dimension": "structure",
      "impact": "high"
    },
    {
      "description": "Added output format guidance for code-generation intent",
      "dimension": "actionability",
      "impact": "medium"
    },
    {
      "description": "Added 2 missing element prompts (60% complete)",
      "dimension": "completeness",
      "impact": "medium"
    },
    {
      "description": "Added 6 best practices for authentication, api",
      "dimension": "completeness",
      "impact": "medium"
    }
  ],
  "intent": {
    "characteristics": {
      "hasCodeContext": false,
      "hasTechnicalTerms": false,
      "isOpenEnded": false,
      "needsStructure": true
    },
    "confidence": 100,
    "primaryIntent": "code-generation",
    "suggestedMode": "deep"
  },
  "mode": "fast",
  "original": "Create a login page",
  "processingTimeMs": "[PROCESSING_TIME]",
  "quality": {
    "actionability": 55,
    "clarity": 100,
    "completeness": 100,
    "efficiency": 95,
    "improvements": [
      "Added missing context and specifications",
      "Added clear objective statement"
    ],
    "overall": 90.5,
    "specificity": 100,
    "strengths": [
      "Clear objective and goals",
      "Concise and focused",
      "Well-structured with logical flow",
      "Comprehensive with all necessary details",
      "Highly specific with concrete details"
    ],
    "structure": 100
  }
}"
`;

exports[`Optimization Output Snapshots quality assessment structure quality dimension keys should match snapshot structure: quality-dimension-keys 1`] = `
[
  "actionability",
  "clarity",
  "completeness",
  "efficiency",
  "specificity",
  "structure",
]
`;
